@using Microsoft.FluentUI.AspNetCore.Components
@using Askyl.Dsm.WebHosting.Ui.Components.Patterns.WorkingState

<FluentOverlay Visible="@WorkingStateComponent.IsWorking" Opacity="@Opacity">
    <FluentStack Orientation="Orientation.Vertical" HorizontalAlignment="HorizontalAlignment.Center" VerticalAlignment="VerticalAlignment.Center">
        <FluentProgressRing />
        <FluentLabel Typo="Typography.Header" Class="full-size">
            @GetDisplayMessage()
        </FluentLabel>
    </FluentStack>
</FluentOverlay>

@code
{
    [Parameter, EditorRequired]
    public IWorkingState WorkingStateComponent { get; set; } = default!;

    [Parameter]
    public double Opacity { get; set; } = 0.4;

    private string GetDisplayMessage() => WorkingStateComponent.WorkingMessage ?? WorkingStateComponent.GetContextualMessage();
}
